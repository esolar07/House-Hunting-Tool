<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation</title>
    <link rel="stylesheet" href="stylesheets/app.css" />
    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>
  <body>
    
    <header>
      <nav class="top-bar" data-topbar role="navigation">
        <ul class="title-area">
          <li class="name">
            <h1><a href="#">House Hunting Tool</a></h1>
          </li>
           <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
          <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
        </ul>

        <section class="top-bar-section">
          <!-- Right Nav Section -->
          <ul class="right">
            <li class="has-dropdown">
              <a href="#">Menu</a>
              <ul class="dropdown">
                <li><a href="http://miami.craigslist.org/search/apa">Craiglist Housing</a></li>
                <li><a href="http://www.trulia.com/FL/South_Florida/">Trulia</a></li>
                <li><a href="http://hotpads.com/FL">Hotpads</a></li>
              </ul>
            </li>
          </ul>

        </section>
      </nav>
    </header>

    <form>
      <div class="f-box" id="drop">
        <h4>New Listing</h4>
        <input type="text" id="address" placeholder="Address">
        <input type="text" id="rooms" placeholder="Rooms">
        <input type="text" id="baths" placeholder="bathrooms">
        <input type="text" id="price" placeholder="Price">
        <button class="button" id="updateButton">Submit</button>
      </div>
      <div class="f-box-tab" onclick="toggle('drop');">
        <h4>Add a possible option</h4S>
      </div>
    </form>

    <section id="mainSection">
      <div class="others">
        <h2>Username</h2>
        <aside>
          
        </aside>
        <p>Non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. At vero eos et accusamus. Accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo.</p>
      </div>

      <div class="others">
        <h2>Username</h2>
        <p>Non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. At vero eos et accusamus. Accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo.</p>
      </div>

    </section>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="bower_components/foundation/js/foundation/foundation.top.js"></script>
    <script src="js/app.js"></script>
    <script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
    <script>

      // toggle function for feeling form
      function toggle(id){
        var e = document.getElementById(id);
        // if style is set to display none
        if(e.style.display == "none"){
          //then change to block
          e.style.display = "block";
          console.log("modified to display block");
          // otherwise display none
        }else{
          e.style.display = "none";
          console.log("modified to display none");
        }
      };


      var address = document.getElementById("address"),
      rooms = document.getElementById("rooms"),
      baths = document.getElementById("baths"),
      price = document.getElementById("price"),
      updateButton = document.getElementById("updateButton"),
      myDataRef = new Firebase('https://esolar.firebaseio.com/'),
      currentMesgRef = myDataRef.child("currentMesg");
      // event listener button
      updateButton.addEventListener('click', function(){
        // updates db
        currentMesgRef.push({add: address.value, rooms: rooms.value, baths: baths.value, price: price.value});
        address.value="";
        console.log("Added to FB-DB");
      });

     // event listener for db change
     currentMesgRef.on("child_added", function(snapshot){
      var message = snapshot.val(); 
      displayMessage(message.feel, message.reason);    
     });

     function displayMessage(address, rooms){

      var node = document.createElement("div");
      node.classList.add("others")
      var textnode = document.createTextNode(address);
      node.appendChild(textnode);
      document.getElementById("mainSection").appendChild(node);
      console.log("change made on db...");
     }

    </script>
  </body>
</html>
